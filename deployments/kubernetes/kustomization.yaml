apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: freightliner-production

resources:
  - serviceaccount.yaml
  - configmap.yaml
  - deployment.yaml
  - service.yaml
  - hpa.yaml
  - networkpolicy.yaml

# Images to update (use kustomize edit set image)
images:
  - name: ghcr.io/hemzaz/freightliner
    newTag: latest

# Common labels
commonLabels:
  app: freightliner
  managed-by: kustomize

# Common annotations
commonAnnotations:
  version: "1.0.0"

# ConfigMap generator (optional)
configMapGenerator:
  - name: freightliner-env
    literals:
      - ENVIRONMENT=production

# Secret generator (don't commit actual secrets)
# secretGenerator:
#   - name: freightliner-secrets
#     envs:
#       - .env.production

# Patches for different environments
patchesStrategicMerge:
  - |-
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: freightliner
    spec:
      replicas: 3
